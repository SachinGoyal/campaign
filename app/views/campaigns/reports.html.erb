<script type="text/javascript">
  
  $(function () { 
    $('#container').highcharts({
        chart: {
            type: 'column',

        },
        plotOptions: {
            column: {
                pointPadding: 0.2,
                borderWidth: 0
            }
        },
        tooltip: {
            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
            footerFormat: '</table>',
            shared: true,
            useHTML: true
        },
        title: {
            text: 'Newsletter'
        },

        credits: {
          enabled: false
        },

        xAxis: {
            categories:  ["Open Total", "Unique Total", "Click Total", "Unique Click" , "Unique Subscriber Clicks", "Hard Bounces", "Soft Bounces", "Unsubscribed", "Forwards Count" , "Forwards Opens", "Emails Sent", "Abuse Reports"]
        },
        yAxis: {
            title: {
                text: 'Newsletter Sent'
            }
        },
        series: [
           {
            showInLegend: false,  
            name: 'Newsletter',
            data: $('#container').data('report'),
            color: '#1ABB9C',
            pointWidth: 35

        },
        ]
    });
});


</script>


<%= form_for @campaign, :url => {:controller => "campaigns", :action => "reports"},:method => :get do |f| %>

  <div class="row">
    <div class="col-md-12">
        <div class="col-md-8">
        <label class="col-xs-2 custom-label-control control-label">Repots <i class="fa fa-chevron-right custom-spacing-left"></i></label>
        <div class="col-xs-5">
        <%= collection_select(:report, :campaign_id, @campaigns, :id, :name, {:prompt => 'Select Campaign', selected: @campaign_id}, {:class => 'form-control required'}) %>
        </div><!-- col-xs-5 -->
        <div class="col-xs-5" id= 'campaign-newsletter'>
            <%= collection_select(:report, :newsletter_id, @newsletters, :id, :name, {:prompt => 'Select Newsletter', selected: @newsletter_id}, {:class => 'form-control required'}) %>
        </div><!-- col-xs-5 -->
        </div><!-- col-md-8 -->
       <%= f.submit "Report", class: 'btn dark-btn-custom' %>
    </div>
  </div><!-- row -->
  <div class="custom-white-spacer">
    <% if @data.present? %>
      <div id="container" style="width:100%; height:400px;" data-report= "<%=@data%>" ></div>
    <% end %>
  </div>
<% end %>

